<<<<<<< HEAD
<<<<<<< Updated upstream
/**
 * Copyright (c) Tiny Technologies, Inc. All rights reserved.
 * Licensed under the LGPL or a commercial license.
 * For LGPL see License.txt in the project root for license information.
 * For commercial licenses see https://www.tiny.cloud/
 *
 * Version: 5.0.1 (2019-02-21)
 */
(function () {
    var minitemplate = (function () {
        'use strict';
  
        var global = tinymce.util.Tools.resolve('tinymce.PluginManager');
  
        var constant = function (value) {
          return function () {
            return value;
          };
        };
        function curry(fn) {
          var initialArgs = [];
          for (var _i = 1; _i < arguments.length; _i++) {
            initialArgs[_i - 1] = arguments[_i];
          }
          return function () {
            var restArgs = [];
            for (var _i = 0; _i < arguments.length; _i++) {
              restArgs[_i] = arguments[_i];
            }
            var all = initialArgs.concat(restArgs);
            return fn.apply(null, all);
          };
=======
=======
>>>>>>> update/tinymce6.7.0
(function() {
  var minitemplate = (function() {
    'use strict';
    
    // tinymce.PluginManager.requireLangPack("minitemplate");
    tinymce.PluginManager.add("minitemplate", function(editor, url) {
<<<<<<< HEAD
=======
      
      tinymce.DOM.loadCSS("/MelisCore/css/mini-template.css");

>>>>>>> update/tinymce6.7.0
      // Used to store a reference to the dialog when we have opened it
      var dialogApi = false;

      var _urlDialogConfig = {
        title: 'Mini Template',
        url: url + '/mini-template.html',
        width: 1600,
        height: 600
      };

      // Define the toolbar button
      editor.ui.registry.addButton('minitemplate', {
        icon: 'template',
        tooltip: 'Mini Template',
        title: 'Mini Template',
        onAction: () => {
          dialogApi = editor.windowManager.openUrl(_urlDialogConfig);

          dialogApi.block('Loading...');

          setTimeout(function() {
            dialogApi.unblock();
          }, 2000);
<<<<<<< HEAD
>>>>>>> Stashed changes
=======
>>>>>>> update/tinymce6.7.0
        }
      });

      // Add a button into the menu bar
      editor.ui.registry.addMenuItem('minitemplate', {
        icon: 'template',
        text: 'Mini Template',
        tooltip: 'Mini Template',
        title: 'Mini Template',
        onAction: () => {
          dialogApi = editor.windowManager.openUrl(_urlDialogConfig);

          dialogApi.block('Loading...');
          
          setTimeout(function() {
            dialogApi.unblock();
          }, 2000);
        }
      });

      // Return details to be displayed in TinyMCE's "Help" plugin, optional
      return {
        getMetadata: function() {
          return {
            name: 'Mini Template Plugin',
            url: '/'
          };
        }
      }

    });

  }());
})();